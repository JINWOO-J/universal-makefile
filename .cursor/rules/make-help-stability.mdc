---
alwaysApply: true
---
# Make Help ì•ˆì • ê°€ì´ë“œ (macOS/BSD awk, GNU Make 3.81 í˜¸í™˜)

ì°¸ê³  êµ¬í˜„: [makefiles/help.mk](mdc:makefiles/help.mk)

## í•µì‹¬ ì›ì¹™
- í•œ ë ˆì‹œí”¼ ì¤„ = ì…¸ í•œ ë²ˆ. ë©€í‹°ë¼ì¸/ heredoc ê¸ˆì§€.
- ë ˆì‹œí”¼ ë‚´ awkëŠ” ë°˜ë“œì‹œ í•œ ì¤„, `$`ëŠ” ëª¨ë‘ `$$`ë¡œ ì´ìŠ¤ì¼€ì´í”„.
- íŒŒì´í”„ ê¸ˆì§€(`grep | awk` ë“±). `awk $(MAKEFILE_LIST)`ë¡œ ì§ì ‘ ì½ì–´ `FILENAME` ìœ ì§€.
- ìƒ‰ìƒ ì¶œë ¥ì€ `printf` ì‚¬ìš©.
- ì¹´í…Œê³ ë¦¬ ë§¤ì¹­ì€ í¬í•¨(contains) ë¡œì§ í—ˆìš©(ì´ëª¨ì§€ ìœ„ì¹˜ ë¶ˆë¬¸).
- mac ê¸°ë³¸ awk ê¸°ì¤€ POSIX awkë§Œ ì‚¬ìš©(gawk ì „ìš© ê¸°ëŠ¥ ê¸ˆì§€).

## ì•ˆì „ í…œí”Œë¦¿
ì¹´í…Œê³ ë¦¬ ëª©ë¡(íŒŒì¼ ë°°ì§€ í¬í•¨):
```
_show-category:
	@awk -v cat="$(CATEGORY)" 'function base(p,a,n){n=split(p,a,"/");return a[n]} /^[A-Za-z0-9_.-]+:[[:space:]].*##[[:space:]]/ { line=$$0; pos=index(line,"## "); if(!pos) next; comment=substr(line,pos+3); if(index(comment,cat)==0) next; split(line,parts,":"); t=parts[1]; printf("  \033[0;32m%-20s\033[0m %s  \033[90m[%s]\033[0m\n", t, comment, base(FILENAME)) }' $(MAKEFILE_LIST)
```

íŠ¹ì • íƒ€ê¹ƒ ìœ„ì¹˜ ì°¾ê¸°:
```
where:
	@awk -v tgt="$(TARGET)" 'function base(p,a,n){n=split(p,a,"/");return a[n]} /^[A-Za-z0-9_.-]+:[[:space:]]/ { split($$0,p,":"); if(p[1]==tgt) print "â€¢ " tgt "  ->  " base(FILENAME) }' $(MAKEFILE_LIST)
```

í—¤ë”/ìƒ‰ìƒ ì˜ˆì‹œ:
```
help:
	@printf '\033[0;34m%s\033[0m\n' "ğŸ“‹ Universal Makefile System"
	@printf '\033[0;33m%s\033[0m\n' "ğŸ¯ Main Build Targets:"
	@$(MAKE) --no-print-directory _show-category CATEGORY="ğŸ¯"
```

## PR ì²´í¬ë¦¬ìŠ¤íŠ¸
- ë ˆì‹œí”¼ í•œ ì¤„ ë³´ì¥, awk ë‚´ `$` ì´ìŠ¤ì¼€ì´í”„ í™•ì¸.
- `$(MAKEFILE_LIST)` ì§ì ‘ ì½ê¸°(íŒŒì´í”„ ì‚¬ìš© ê¸ˆì§€).
- ìƒ‰ìƒì€ `printf`ë¡œë§Œ ì¶œë ¥.
- `make -n help` ê²°ê³¼ ë”°ì˜´í‘œ/ê°œí–‰ ì´ìƒ ì—¬ë¶€ ì ê²€.

---
alwaysApply: true
description: >-
  Make help stability guide for GNU Make 3.81/macOS. Enforce one-line recipes,
  POSIX awk, filename badges without pipes, portable colors via printf,
  relaxed category emoji matching, and a pre-PR checklist. Includes one-line
  awk templates for category listing and target location.
globs: Makefile,makefiles/*.mk
---

# CursorRules â€” Make Help ì•ˆì • ê°€ì´ë“œ

ì´ ê·œì¹™ì€ `make help`/í—¬í”„ ì‹œìŠ¤í…œì´ macOS/BSD awk, GNU Make 3.81 í™˜ê²½ì—ì„œë„ ì•ˆì •ì ìœ¼ë¡œ ë™ì‘í•˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤. ê´€ë ¨ êµ¬í˜„ì€ ì£¼ë¡œ [makefiles/help.mk](mdc:makefiles/help.mk)ì™€ ì—°ê´€ë©ë‹ˆë‹¤.

## 1) ì…¸/ë ˆì‹œí”¼ ê·œì¹™
- í•œ ë ˆì‹œí”¼ ì¤„ = ì…¸ í•œ ë²ˆ. ì—¬ëŸ¬ ì¤„ ëª…ë ¹ì´ë‚˜ heredoc ê¸ˆì§€ (GNU Make 3.81ì—” `.ONESHELL` ì—†ìŒ)
- ì—¬ëŸ¬ ì¤„ì´ ê¼­ í•„ìš”í•˜ë©´ ì™¸ë¶€ ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ë¡œ ë¶„ë¦¬í•˜ê³  í•œ ì¤„ë¡œ í˜¸ì¶œ

## 2) awk ì„ë² ë“œ ê·œì¹™
- ë ˆì‹œí”¼ ì•ˆì—ì„œ awk ì½”ë“œëŠ” ë¬´ì¡°ê±´ í•œ ì¤„ë¡œ ì‘ì„±
- awk ì†ŒìŠ¤ ë‚´ ëª¨ë“  `$`ëŠ” `$$`ë¡œ ì´ìŠ¤ì¼€ì´í”„ (`$0` â†’ `$$0`)
- ê¸´ ë”°ì˜´í‘œ ë¸”ë¡, ì¤„ë°”ê¿ˆ, ë°±ìŠ¬ë˜ì‹œ ì—°ì† ì‚¬ìš© ê¸ˆì§€ (ë”°ì˜´í‘œ ê· í˜•Â·ê°œí–‰ ë¡œìŠ¤ ìœ„í—˜)

## 3) íŒŒì¼ëª… ë°°ì§€ ê·œì¹™
- íŒŒì¼ëª…ì„ ì¶œë ¥í•˜ë ¤ë©´ íŒŒì´í”„ ê¸ˆì§€. `awk $(MAKEFILE_LIST)`ë¡œ ì§ì ‘ íŒŒì¼ì„ ì½ì–´ì•¼ `FILENAME` ì‚¬ìš© ê°€ëŠ¥
- `grep | awk`ì²˜ëŸ¼ íŒŒì´í”„ë¥¼ ì“°ë©´ `FILENAME`ì´ ì‚¬ë¼ì ¸ `[file.mk]` ë°°ì§€ë¥¼ ë¶™ì¼ ìˆ˜ ì—†ìŒ

## 4) ìƒ‰ìƒ ì¶œë ¥ ê·œì¹™
- `echo '\033...'` ì‚¬ìš© ê¸ˆì§€ (í”Œë«í¼ë§ˆë‹¤ ë‹¤ë¦„)
- ì¼ë°˜ ì‰˜ ì¶œë ¥ì€ `printf` ì‚¬ìš©ì„ ê¶Œì¥
- ë ˆì‹œí”¼ ë‚´ awkì—ì„œëŠ” ìƒ‰ìƒ ì´ìŠ¤ì¼€ì´í”„ë¥¼ í•˜ë“œì½”ë”©í•˜ì§€ ë§ê³ , ê¸°ì¡´ ìƒ‰ ë³€ìˆ˜(`$(GREEN)`, `$(RESET)` ë“±)ë¥¼ `-v`ë¡œ ì£¼ì…í•´ ì‚¬ìš©

## 5) ì¹´í…Œê³ ë¦¬ ë§¤ì¹­ ê·œì¹™
- ì¸ë¼ì¸ ì½”ë©˜íŠ¸(`## ...`) ì•ˆì˜ ì´ëª¨ì§€ëŠ” ìœ„ì¹˜ ë¶ˆë¬¸ í—ˆìš©: `index(comment, cat) > 0`
- â€œë§¨ ì•ì´ì–´ì•¼ í•œë‹¤(==1)â€ ê°™ì€ ê³¼ë„í•œ ì œì•½ ê¸ˆì§€
- í•„ìš” ì‹œ ì£¼ì„ í—¤ë”(`# ...`)ì˜ ì´ëª¨ì§€ë„ í˜„ì¬ ì¹´í…Œê³ ë¦¬ë¡œ ê¸°ì–µí•´ ì‚¬ìš©

## 6) BSD/mac í™˜ê²½ í˜¸í™˜
- mac ê¸°ë³¸ awk ê¸°ì¤€ POSIX awkë§Œ ì‚¬ìš© (gawk ì „ìš© `gensub`, `asort` ê¸ˆì§€)
- ì •ë ¬ì´ í•„ìš”í•˜ë©´ ê°„ë‹¨í•œ ë°°ì—´ ì •ë ¬(ìˆ˜ë™) ë˜ëŠ” ì •ë ¬ ìƒëµ. íŒŒì´í”„ `sort`ëŠ” ê¸ˆì§€(ë°°ì§€ ìœ ì§€ë¥¼ ìœ„í•´)

## 7) ë””ë²„ê¹… ë£¨í‹´
- ì‹¤ì œ ì‹¤í–‰ í™•ì¸: `make -n help`
- íŠ¸ë ˆì´ìŠ¤ í•„ìš” ì‹œ: `make SHELL="/bin/bash -x" help`
- ë¬¸ì œ ë ˆì‹œí”¼ëŠ” í•œ ì¤„ë¡œ ì¶•ì•½í•˜ì—¬ ì¬í˜„ â†’ ë”°ì˜´í‘œ/ì´ìŠ¤ì¼€ì´í”„ ìš°ì„  ì ê²€

## 8) ì•ˆì „í•œ í…œí”Œë¦¿ (ë³µë¶™ìš©)

### A) ì¹´í…Œê³ ë¦¬ë³„ ì¶œë ¥(íŒŒì¼ ë°°ì§€ í¬í•¨) â€” í•œ ì¤„ awk
```makefile
_show-category:
	@awk -v cat="$(CATEGORY)" -v GREEN="$(GREEN)" -v RESET="$(RESET)" 'function base(p,a,n){n=split(p,a,"/");return a[n]} /^[A-Za-z0-9_.-]+:[[:space:]].*##[[:space:]]/ { line=$$0; pos=index(line,"## "); if(!pos) next; comment=substr(line,pos+3); if(index(comment,cat)==0) next; split(line,parts,":"); t=parts[1]; desc=comment; printf("  %s%-20s%s %s  [%s]\n", GREEN, t, RESET, desc, base(FILENAME)) }' $(MAKEFILE_LIST)
```

## í•µì‹¬ ì›ì¹™
- í•œ ë ˆì‹œí”¼ ì¤„ = ì…¸ í•œ ë²ˆ (GNU Make 3.81ì€ `.ONESHELL` ì—†ìŒ)
- awkëŠ” í•œ ì¤„ë¡œ, awk ë‚´ë¶€ì˜ `$`ëŠ” ë°˜ë“œì‹œ `$$`ë¡œ ì´ìŠ¤ì¼€ì´í”„ (ì˜ˆ: `$0` â†’ `$$0`)
- íŒŒì´í”„ ê¸ˆì§€: `grep | awk` ëŒ€ì‹  `awk $(MAKEFILE_LIST)`ë¡œ íŒŒì¼ì„ ì§ì ‘ ì½ì–´ `FILENAME` ë³´ì¡´
- ìƒ‰ìƒì€ ê°€ë…ì„±ì„ ìœ„í•´ awkì— `$(GREEN)`, `$(RESET)` ë“±ì„ `-v`ë¡œ ì£¼ì…í•´ ì‚¬ìš© (í•˜ë“œì½”ë”©ëœ ANSI ë¦¬í„°ëŸ´ ì§€ì–‘)
- ì¹´í…Œê³ ë¦¬ ë§¤ì¹­ì€ í¬í•¨(contains): ì¸ë¼ì¸ ì½”ë©˜íŠ¸ì˜ ì´ëª¨ì§€ê°€ ì–´ë””ì— ìˆì–´ë„ `index(comment, cat) > 0`ì´ë©´ ë§¤ì¹­

### B) íŠ¹ì • íƒ€ê¹ƒì´ ì–´ëŠ íŒŒì¼ì— ìˆëŠ”ì§€
```makefile
where:
	@awk -v tgt="$(TARGET)" 'function base(p,a,n){n=split(p,a,"/");return a[n]} /^[A-Za-z0-9_.-]+:[[:space:]]/ { split($$0,p,":"); if(p[1]==tgt) print "â€¢ " tgt "  ->  " base(FILENAME) }' $(MAKEFILE_LIST)
```

### C) í—¤ë”/ìƒ‰ìƒ ì¶œë ¥ ì˜ˆì‹œ (printfë§Œ ì‚¬ìš©)
```makefile
help:
	@printf '\033[0;34m%s\033[0m\n' "ğŸ“‹ Universal Makefile System"
	@printf '\033[0;33m%s\033[0m\n' "ğŸ¯ Main Build Targets:"
	@$(MAKE) --no-print-directory _show-category CATEGORY="ğŸ¯"
```

## 9) ì™¸ë¶€ ìŠ¤í¬ë¦½íŠ¸ê°€ í•„ìš”í•  ë•Œ(ì°¨ì„ ì±…)
- ë³µì¡í•œ awkê°€ ê¼­ í•„ìš”í•˜ë©´ ì •ì  íŒŒì¼ë¡œ ë‘ê³  `-f` ì˜µì…˜ìœ¼ë¡œ í•œ ì¤„ í˜¸ì¶œ
- ì˜ˆ: `makefiles/help.awk` â†’ `awk -f makefiles/help.awk ...`
- â€œë™ì  ìƒì„±â€ì´ë‚˜ heredocì€ GNU Make 3.81ì—ì„œëŠ” í”¼í•¨

## 10) PR ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸
- `_show-category`/`where` ë ˆì‹œí”¼ëŠ” í•œ ì¤„ì¸ê°€?
- awk ë‚´ë¶€ `$`ê°€ ëª¨ë‘ `$$`ë¡œ ì´ìŠ¤ì¼€ì´í”„ë¼ ìˆëŠ”ê°€?
- `$(MAKEFILE_LIST)`ë¥¼ ì§ì ‘ ì½ê³  ìˆëŠ”ê°€? (íŒŒì´í”„ ì—†ìŒ)
- í—¤ë”/ìƒ‰ìƒì€ `printf`ë¡œ ì¶œë ¥í•˜ëŠ”ê°€?
- `make -n help` ê²°ê³¼ì— ë”°ì˜´í‘œ ëŠê¹€ ë“± ì´ìƒì´ ì—†ëŠ”ê°€?
- macì—ì„œ ì‹¤ì œ `make help`ë¡œ ìƒ‰Â·ì¹´í…Œê³ ë¦¬Â·ë°°ì§€ í™•ì¸í–ˆëŠ”ê°€?

## ì°¸ê³  íŒŒì¼
- [makefiles/help.mk](mdc:makefiles/help.mk)
- [makefiles/git-flow.mk](mdc:makefiles/git-flow.mk)

