name: ì¤‘ì•™í™”ëœ CI/CD ëŸ¬ë„ˆ

on:
  repository_dispatch:
    types: [deploy]

env:
  # ê¸°ë³¸ í™˜ê²½ ë³€ìˆ˜
  DOCKER_BUILDKIT: 1
  COMPOSE_DOCKER_CLI_BUILD: 1

jobs:
  validate-payload:
    name: í˜ì´ë¡œë“œ ê²€ì¦
    runs-on: ubuntu-latest
    outputs:
      source_repo: ${{ steps.validate.outputs.source_repo }}
      ref: ${{ steps.validate.outputs.ref }}
      version: ${{ steps.validate.outputs.version }}
      service_kind: ${{ steps.validate.outputs.service_kind }}
      environment: ${{ steps.validate.outputs.environment }}
      valid: ${{ steps.validate.outputs.valid }}
    
    steps:
      - name: í˜ì´ë¡œë“œ ê²€ì¦
        id: validate
        run: |
          echo "=== Repository Dispatch í˜ì´ë¡œë“œ ê²€ì¦ ==="
          
          # í•„ìˆ˜ í•„ë“œ í™•ì¸
          SOURCE_REPO="${{ github.event.client_payload.source_repo }}"
          REF="${{ github.event.client_payload.ref }}"
          VERSION="${{ github.event.client_payload.version }}"
          SERVICE_KIND="${{ github.event.client_payload.service_kind }}"
          ENVIRONMENT="${{ github.event.client_payload.environment }}"
          
          echo "source_repo: $SOURCE_REPO"
          echo "ref: $REF"
          echo "version: $VERSION"
          echo "service_kind: $SERVICE_KIND"
          echo "environment: $ENVIRONMENT"
          
          # í•„ìˆ˜ í•„ë“œ ê²€ì¦
          if [[ -z "$SOURCE_REPO" || -z "$REF" || -z "$VERSION" || -z "$SERVICE_KIND" || -z "$ENVIRONMENT" ]]; then
            echo "âŒ í•„ìˆ˜ í˜ì´ë¡œë“œ í•„ë“œê°€ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤."
            echo "í•„ìˆ˜ í•„ë“œ: source_repo, ref, version, service_kind, environment"
            exit 1
          fi
          
          # service_kind ê²€ì¦
          if [[ "$SERVICE_KIND" != "fe" && "$SERVICE_KIND" != "be" ]]; then
            echo "âŒ service_kindëŠ” 'fe' ë˜ëŠ” 'be'ì—¬ì•¼ í•©ë‹ˆë‹¤."
            exit 1
          fi
          
          # environment ê²€ì¦
          if [[ "$ENVIRONMENT" != "prod" && "$ENVIRONMENT" != "staging" ]]; then
            echo "âŒ environmentëŠ” 'prod' ë˜ëŠ” 'staging'ì´ì–´ì•¼ í•©ë‹ˆë‹¤."
            exit 1
          fi
          
          # ì¶œë ¥ ì„¤ì •
          echo "source_repo=$SOURCE_REPO" >> $GITHUB_OUTPUT
          echo "ref=$REF" >> $GITHUB_OUTPUT
          echo "version=$VERSION" >> $GITHUB_OUTPUT
          echo "service_kind=$SERVICE_KIND" >> $GITHUB_OUTPUT
          echo "environment=$ENVIRONMENT" >> $GITHUB_OUTPUT
          echo "valid=true" >> $GITHUB_OUTPUT
          
          echo "âœ… í˜ì´ë¡œë“œ ê²€ì¦ ì™„ë£Œ"
      
      - name: Slack ì•Œë¦¼ - ì‹œì‘
        if: vars.SLACK_WEBHOOK_URL
        run: |
          curl -X POST ${{ vars.SLACK_WEBHOOK_URL }} \
            -H 'Content-Type: application/json' \
            -d '{
              "text": "ğŸš€ ë°°í¬ ì‹œì‘",
              "attachments": [{
                "color": "#36a64f",
                "fields": [
                  {"title": "ì†ŒìŠ¤ ì €ì¥ì†Œ", "value": "${{ steps.validate.outputs.source_repo }}", "short": true},
                  {"title": "ë²„ì „", "value": "${{ steps.validate.outputs.version }}", "short": true},
                  {"title": "ì„œë¹„ìŠ¤", "value": "${{ steps.validate.outputs.service_kind }}", "short": true},
                  {"title": "í™˜ê²½", "value": "${{ steps.validate.outputs.environment }}", "short": true},
                  {"title": "ì°¸ì¡°", "value": "${{ steps.validate.outputs.ref }}", "short": false},
                  {"title": "ì›Œí¬í”Œë¡œìš°", "value": "${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}", "short": false}
                ]
              }]
            }'

  build:
    name: ì´ë¯¸ì§€ ë¹Œë“œ ë° í‘¸ì‹œ
    runs-on: ubuntu-latest
    needs: validate-payload
    if: |
      needs.validate-payload.outputs.valid == 'true' &&
      (needs.validate-payload.outputs.ref == 'refs/heads/main' ||
       needs.validate-payload.outputs.ref == 'refs/heads/develop' ||
       startsWith(needs.validate-payload.outputs.ref, 'refs/heads/ci/'))
    
    outputs:
      image_tag: ${{ steps.build-vars.outputs.image_tag }}
      build_version: ${{ steps.build-vars.outputs.build_version }}
      build_commit: ${{ steps.build-vars.outputs.build_commit }}
    
    env:
      SOURCE_REPO: ${{ needs.validate-payload.outputs.source_repo }}
      REF: ${{ needs.validate-payload.outputs.ref }}
      VERSION: ${{ needs.validate-payload.outputs.version }}
      SERVICE_KIND: ${{ needs.validate-payload.outputs.service_kind }}
      ENVIRONMENT: ${{ needs.validate-payload.outputs.environment }}
    
    steps:
      - name: ëŸ¬ë„ˆ ì €ì¥ì†Œ ì²´í¬ì•„ì›ƒ
        uses: actions/checkout@v4
      
      - name: Python í™˜ê²½ ì„¤ì •
        uses: actions/setup-python@v4
        with:
          python-version: '3.12'
      
      - name: ì†ŒìŠ¤ ì½”ë“œ ê°€ì ¸ì˜¤ê¸°
        run: |
          echo "=== ì†ŒìŠ¤ ì½”ë“œ ê°€ì ¸ì˜¤ê¸° ==="
          make git-fetch \
            SOURCE_REPO=$SOURCE_REPO \
            REF=$REF \
            CLEAN=true
      
      - name: Docker Buildx ì„¤ì •
        uses: docker/setup-buildx-action@v3
      
      - name: Docker ë¡œê·¸ì¸
        uses: docker/login-action@v3
        with:
          registry: ${{ vars.DOCKER_REGISTRY || 'docker.io' }}
          username: ${{ secrets.DOCKER_USERNAME }}
          password: ${{ secrets.DOCKER_PASSWORD }}
      
      - name: ë¹Œë“œ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
        id: build-vars
        run: |
          echo "DOCKER_REGISTRY=${{ vars.DOCKER_REGISTRY || 'docker.io' }}" >> $GITHUB_ENV
          echo "REPO_HUB=${{ vars.DOCKER_REPO_HUB || '42tape' }}" >> $GITHUB_ENV
          echo "NAME=${{ vars.IMAGE_NAME || 'app' }}" >> $GITHUB_ENV
          echo "UMF_MODE=global" >> $GITHUB_ENV
          
          # ë¹Œë“œ ë³€ìˆ˜ ì¶”ì¶œ
          eval $(make print-env SILENT_MODE=1)
          echo "IMAGE_TAG=$IMAGE_TAG" >> $GITHUB_ENV
          echo "BUILD_VERSION=$VERSION" >> $GITHUB_ENV
          echo "BUILD_COMMIT=$SHA8" >> $GITHUB_ENV
          
          # Outputs ì„¤ì •
          echo "image_tag=$IMAGE_TAG" >> $GITHUB_OUTPUT
          echo "build_version=$VERSION" >> $GITHUB_OUTPUT
          echo "build_commit=$SHA8" >> $GITHUB_OUTPUT
          
          echo "=== ë¹Œë“œ ì •ë³´ ==="
          echo "IMAGE_TAG: $IMAGE_TAG"
          echo "VERSION: $VERSION"
          echo "COMMIT: $SHA8"
      
      - name: ì´ë¯¸ì§€ ë¹Œë“œ
        run: |
          echo "=== Docker ì´ë¯¸ì§€ ë¹Œë“œ ==="
          make build \
            UMF_MODE=global \
            REPO_HUB=$REPO_HUB \
            NAME=$NAME \
            ENV=$ENVIRONMENT
      
      - name: ì´ë¯¸ì§€ í‘¸ì‹œ
        run: |
          echo "=== Docker ì´ë¯¸ì§€ í‘¸ì‹œ ==="
          make push
      
      - name: ë¹Œë“œ ì •ë³´ ì¶œë ¥
        run: |
          echo "=== ë¹Œë“œ ì™„ë£Œ ==="
          make info | grep -A 10 "Core Variables"
      
      - name: Slack ì•Œë¦¼ - ë¹Œë“œ ì„±ê³µ
        if: success() && vars.SLACK_WEBHOOK_URL
        run: |
          curl -X POST ${{ vars.SLACK_WEBHOOK_URL }} \
            -H 'Content-Type: application/json' \
            -d '{
              "text": "âœ… ë¹Œë“œ ì„±ê³µ",
              "attachments": [{
                "color": "good",
                "fields": [
                  {"title": "ì†ŒìŠ¤ ì €ì¥ì†Œ", "value": "${{ needs.validate-payload.outputs.source_repo }}", "short": true},
                  {"title": "ë²„ì „", "value": "${{ env.BUILD_VERSION }}", "short": true},
                  {"title": "ì„œë¹„ìŠ¤", "value": "${{ needs.validate-payload.outputs.service_kind }}", "short": true},
                  {"title": "í™˜ê²½", "value": "${{ needs.validate-payload.outputs.environment }}", "short": true},
                  {"title": "ì»¤ë°‹", "value": "${{ env.BUILD_COMMIT }}", "short": true},
                  {"title": "ì´ë¯¸ì§€", "value": "${{ env.IMAGE_TAG }}", "short": false}
                ]
              }]
            }'
      
      - name: Slack ì•Œë¦¼ - ë¹Œë“œ ì‹¤íŒ¨
        if: failure() && vars.SLACK_WEBHOOK_URL
        run: |
          curl -X POST ${{ vars.SLACK_WEBHOOK_URL }} \
            -H 'Content-Type: application/json' \
            -d '{
              "text": "âŒ ë¹Œë“œ ì‹¤íŒ¨",
              "attachments": [{
                "color": "danger",
                "fields": [
                  {"title": "ì†ŒìŠ¤ ì €ì¥ì†Œ", "value": "${{ needs.validate-payload.outputs.source_repo }}", "short": true},
                  {"title": "ë²„ì „", "value": "${{ needs.validate-payload.outputs.version }}", "short": true},
                  {"title": "ì„œë¹„ìŠ¤", "value": "${{ needs.validate-payload.outputs.service_kind }}", "short": true},
                  {"title": "í™˜ê²½", "value": "${{ needs.validate-payload.outputs.environment }}", "short": true},
                  {"title": "ì›Œí¬í”Œë¡œìš°", "value": "${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}", "short": false}
                ]
              }]
            }'

  deploy:
    name: ë°°í¬ ì‹¤í–‰
    runs-on: ubuntu-latest
    needs: [validate-payload, build]
    if: |
      always() &&
      needs.validate-payload.outputs.valid == 'true' &&
      (needs.build.result == 'success' || needs.build.result == 'skipped')
    
    environment: ${{ needs.validate-payload.outputs.environment }}
    
    env:
      SOURCE_REPO: ${{ needs.validate-payload.outputs.source_repo }}
      REF: ${{ needs.validate-payload.outputs.ref }}
      VERSION: ${{ needs.validate-payload.outputs.version }}
      SERVICE_KIND: ${{ needs.validate-payload.outputs.service_kind }}
      ENVIRONMENT: ${{ needs.validate-payload.outputs.environment }}
    
    steps:
      - name: ì½”ë“œ ì²´í¬ì•„ì›ƒ
        uses: actions/checkout@v4
      
      - name: Python í™˜ê²½ ì„¤ì •
        uses: actions/setup-python@v4
        with:
          python-version: '3.12'
      
      - name: Python ì˜ì¡´ì„± ì„¤ì¹˜
        run: |
          pip install boto3 requests
      
      - name: AWS ìê²© ì¦ëª… êµ¬ì„±
        uses: aws-actions/configure-aws-credentials@v4
        with:
          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
          aws-region: ${{ vars.AWS_DEFAULT_REGION || 'us-east-1' }}
      
      - name: Docker ë¡œê·¸ì¸
        uses: docker/login-action@v3
        with:
          registry: ${{ vars.DOCKER_REGISTRY || 'docker.io' }}
          username: ${{ secrets.DOCKER_USERNAME }}
          password: ${{ secrets.DOCKER_PASSWORD }}
      
      - name: ë°°í¬ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
        run: |
          echo "DOCKER_REGISTRY=${{ vars.DOCKER_REGISTRY || 'docker.io' }}" >> $GITHUB_ENV
          echo "DOCKER_REPO_HUB=${{ vars.DOCKER_REPO_HUB || 'jinwoo-j' }}" >> $GITHUB_ENV
          echo "IMAGE_NAME=${{ vars.IMAGE_NAME || 'app' }}" >> $GITHUB_ENV
      
      - name: SSH í‚¤ ì„¤ì •
        run: |
          mkdir -p ~/.ssh
          echo "${{ secrets.EC2_SSH_PRIVATE_KEY }}" > ~/.ssh/id_rsa
          chmod 600 ~/.ssh/id_rsa
          
          # EC2 í˜¸ìŠ¤íŠ¸ë¥¼ known_hostsì— ì¶”ê°€
          ssh-keyscan -H ${{ vars.EC2_HOST }} >> ~/.ssh/known_hosts
      
      - name: EC2ì—ì„œ ë°°í¬ ì‹¤í–‰
        run: |
          echo "=== EC2 ëŸ¬ë„ˆ í˜¸ìŠ¤íŠ¸ì—ì„œ ë°°í¬ ì‹¤í–‰ ==="
          
          # ë°°í¬ ëª…ë ¹ êµ¬ì„±
          DEPLOY_CMD="cd ${{ vars.EC2_DEPLOY_PATH || '/opt/runner' }} && \
            export SOURCE_REPO='$SOURCE_REPO' && \
            export REF='$REF' && \
            export VERSION='$VERSION' && \
            export SERVICE_KIND='$SERVICE_KIND' && \
            export ENVIRONMENT='$ENVIRONMENT' && \
            export DOCKER_REGISTRY='$DOCKER_REGISTRY' && \
            export DOCKER_REPO_HUB='$DOCKER_REPO_HUB' && \
            export IMAGE_NAME='$IMAGE_NAME' && \
            make deploy"
          
          # SSHë¥¼ í†µí•´ ë°°í¬ ì‹¤í–‰
          ssh -o StrictHostKeyChecking=no \
              -i ~/.ssh/id_rsa \
              ${{ vars.EC2_USER || 'ubuntu' }}@${{ vars.EC2_HOST }} \
              "$DEPLOY_CMD"
      
      - name: Slack ì•Œë¦¼ - ë°°í¬ ì„±ê³µ
        if: success() && vars.SLACK_WEBHOOK_URL
        run: |
          # ë¹Œë“œëœ ì´ë¯¸ì§€ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
          IMAGE_TAG="${{ needs.build.outputs.image_tag }}"
          BUILD_VERSION="${{ needs.build.outputs.build_version }}"
          BUILD_COMMIT="${{ needs.build.outputs.build_commit }}"
          
          # ë¹Œë“œê°€ ìŠ¤í‚µëœ ê²½ìš° ê¸°ë³¸ê°’ ì‚¬ìš©
          if [ -z "$IMAGE_TAG" ]; then
            IMAGE_TAG="${{ env.DOCKER_REPO_HUB }}/${{ env.IMAGE_NAME }}:${{ env.VERSION }}"
            BUILD_VERSION="${{ env.VERSION }}"
          fi
          
          curl -X POST ${{ vars.SLACK_WEBHOOK_URL }} \
            -H 'Content-Type: application/json' \
            -d "{
              \"text\": \"ğŸ‰ ë°°í¬ ì„±ê³µ\",
              \"attachments\": [{
                \"color\": \"good\",
                \"fields\": [
                  {\"title\": \"ì†ŒìŠ¤ ì €ì¥ì†Œ\", \"value\": \"${{ env.SOURCE_REPO }}\", \"short\": true},
                  {\"title\": \"ë²„ì „\", \"value\": \"$BUILD_VERSION\", \"short\": true},
                  {\"title\": \"ì„œë¹„ìŠ¤\", \"value\": \"${{ env.SERVICE_KIND }}\", \"short\": true},
                  {\"title\": \"í™˜ê²½\", \"value\": \"${{ env.ENVIRONMENT }}\", \"short\": true},
                  {\"title\": \"ì»¤ë°‹\", \"value\": \"$BUILD_COMMIT\", \"short\": true},
                  {\"title\": \"ì´ë¯¸ì§€\", \"value\": \"$IMAGE_TAG\", \"short\": false}
                ]
              }]
            }"
      
      - name: Slack ì•Œë¦¼ - ë°°í¬ ì‹¤íŒ¨
        if: failure() && vars.SLACK_WEBHOOK_URL
        run: |
          curl -X POST ${{ vars.SLACK_WEBHOOK_URL }} \
            -H 'Content-Type: application/json' \
            -d '{
              "text": "âŒ ë°°í¬ ì‹¤íŒ¨",
              "attachments": [{
                "color": "danger",
                "fields": [
                  {"title": "ì†ŒìŠ¤ ì €ì¥ì†Œ", "value": "${{ env.SOURCE_REPO }}", "short": true},
                  {"title": "ë²„ì „", "value": "${{ env.VERSION }}", "short": true},
                  {"title": "ì„œë¹„ìŠ¤", "value": "${{ env.SERVICE_KIND }}", "short": true},
                  {"title": "í™˜ê²½", "value": "${{ env.ENVIRONMENT }}", "short": true},
                  {"title": "ì›Œí¬í”Œë¡œìš°", "value": "${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}", "short": false}
                ]
              }]
            }'
      
      - name: ì‹¤íŒ¨ ì‹œ ì •ë¦¬
        if: failure()
        run: |
          echo "=== ë°°í¬ ì‹¤íŒ¨ ì‹œ ì •ë¦¬ ì‘ì—… ==="
          
          # SSH í‚¤ ì •ë¦¬
          rm -f ~/.ssh/id_rsa
          
          # ì‹¤íŒ¨ ë¡œê·¸ ìˆ˜ì§‘ (ì„ íƒì‚¬í•­)
          ssh -o StrictHostKeyChecking=no \
              -i ~/.ssh/id_rsa \
              ${{ vars.EC2_USER || 'ubuntu' }}@${{ vars.EC2_HOST }} \
              "cd ${{ vars.EC2_DEPLOY_PATH || '/opt/runner' }} && make logs --tail=50" || true

  summary:
    name: ì›Œí¬í”Œë¡œìš° ìš”ì•½
    runs-on: ubuntu-latest
    needs: [validate-payload, build, deploy]
    if: always()
    
    steps:
      - name: Slack ì•Œë¦¼ - ì›Œí¬í”Œë¡œìš° ì™„ë£Œ
        if: vars.SLACK_WEBHOOK_URL
        run: |
          # ì „ì²´ ìƒíƒœ ê²°ì •
          BUILD_STATUS="${{ needs.build.result }}"
          DEPLOY_STATUS="${{ needs.deploy.result }}"
          
          if [[ "$DEPLOY_STATUS" == "success" ]]; then
            OVERALL_STATUS="success"
            EMOJI="ğŸ‰"
            COLOR="good"
            TEXT="ì „ì²´ ì›Œí¬í”Œë¡œìš° ì„±ê³µ"
          elif [[ "$BUILD_STATUS" == "failure" ]]; then
            OVERALL_STATUS="failure"
            EMOJI="âŒ"
            COLOR="danger"
            TEXT="ë¹Œë“œ ì‹¤íŒ¨"
          elif [[ "$DEPLOY_STATUS" == "failure" ]]; then
            OVERALL_STATUS="failure"
            EMOJI="âŒ"
            COLOR="danger"
            TEXT="ë°°í¬ ì‹¤íŒ¨"
          else
            OVERALL_STATUS="unknown"
            EMOJI="âš ï¸"
            COLOR="warning"
            TEXT="ì›Œí¬í”Œë¡œìš° ì™„ë£Œ (ì¼ë¶€ ìŠ¤í‚µ)"
          fi
          
          curl -X POST ${{ vars.SLACK_WEBHOOK_URL }} \
            -H 'Content-Type: application/json' \
            -d "{
              \"text\": \"$EMOJI $TEXT\",
              \"attachments\": [{
                \"color\": \"$COLOR\",
                \"fields\": [
                  {\"title\": \"ì†ŒìŠ¤ ì €ì¥ì†Œ\", \"value\": \"${{ needs.validate-payload.outputs.source_repo }}\", \"short\": true},
                  {\"title\": \"ë²„ì „\", \"value\": \"${{ needs.validate-payload.outputs.version }}\", \"short\": true},
                  {\"title\": \"ì„œë¹„ìŠ¤\", \"value\": \"${{ needs.validate-payload.outputs.service_kind }}\", \"short\": true},
                  {\"title\": \"í™˜ê²½\", \"value\": \"${{ needs.validate-payload.outputs.environment }}\", \"short\": true},
                  {\"title\": \"ë¹Œë“œ ìƒíƒœ\", \"value\": \"$BUILD_STATUS\", \"short\": true},
                  {\"title\": \"ë°°í¬ ìƒíƒœ\", \"value\": \"$DEPLOY_STATUS\", \"short\": true},
                  {\"title\": \"ì›Œí¬í”Œë¡œìš°\", \"value\": \"${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}\", \"short\": false}
                ]
              }]
            }"

# ìˆ˜ë™ íŠ¸ë¦¬ê±°ë¥¼ ìœ„í•œ ì›Œí¬í”Œë¡œìš°
  manual-deploy:
    name: ìˆ˜ë™ ë°°í¬
    runs-on: ubuntu-latest
    if: github.event_name == 'workflow_dispatch'
    
    steps:
      - name: ìˆ˜ë™ ë°°í¬ ì•ˆë‚´
        run: |
          echo "=== ìˆ˜ë™ ë°°í¬ ì•ˆë‚´ ==="
          echo "ì´ ì›Œí¬í”Œë¡œìš°ëŠ” repository_dispatch ì´ë²¤íŠ¸ë¥¼ í†µí•´ íŠ¸ë¦¬ê±°ë©ë‹ˆë‹¤."
          echo ""
          echo "ë°°í¬ë¥¼ íŠ¸ë¦¬ê±°í•˜ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ APIë¥¼ í˜¸ì¶œí•˜ì„¸ìš”:"
          echo ""
          echo "curl -X POST \\"
          echo "  -H \"Authorization: token \$GITHUB_TOKEN\" \\"
          echo "  -H \"Accept: application/vnd.github.v3+json\" \\"
          echo "  https://api.github.com/repos/\$OWNER/\$REPO/dispatches \\"
          echo "  -d '{"
          echo "    \"event_type\": \"deploy\","
          echo "    \"client_payload\": {"
          echo "      \"source_repo\": \"organization/app-name\","
          echo "      \"ref\": \"main\","
          echo "      \"version\": \"v1.0.0\","
          echo "      \"service_kind\": \"fe\","
          echo "      \"environment\": \"staging\""
          echo "    }"
          echo "  }'"
          echo ""
          echo "í•„ìˆ˜ ì‹œí¬ë¦¿ ë° ë³€ìˆ˜:"
          echo "- Secrets: AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY, DOCKER_USERNAME, DOCKER_PASSWORD, EC2_SSH_PRIVATE_KEY, SLACK_WEBHOOK_URL"
          echo "- Variables: AWS_DEFAULT_REGION, DOCKER_REGISTRY, DOCKER_REPO_HUB, EC2_HOST, EC2_USER, EC2_DEPLOY_PATH, SLACK_CHANNEL"